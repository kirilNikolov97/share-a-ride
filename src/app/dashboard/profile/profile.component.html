<div class="container-fluid">
  <div class="row">
    <div class="col-md-2">
      <app-sidebar></app-sidebar>
    </div>
    <div class="col-md-10">

      <!-- Unapproved route stops -->
      <span *ngIf="user.driver">
      <h3>Waiting for approval:</h3>
      <ul class="list-group list-group-flush">
        <li *ngIf="this.futureRoutesAsDriverWaitingForApproval.length == 0" class="list-group-item">Nothing to approve.</li>
        <li *ngFor="let route of this.futureRoutesAsDriverWaitingForApproval" class="list-group-item">
          <table class="table">
            <tr>
              <th scope="col">{{route.dateRoute.toString().split('T').join(' ')}}</th>

              <th>
                From:
               <span *ngIf="route.officeDirection">
                <span *ngFor="let routeStop of this.route.routeStops">
                  <span *ngIf="routeStop.passengerEnum.toString() == 'DRIVER'">
                    {{routeStop.address.district + ' ' + routeStop.address.street}}
                  </span>
                </span>
               </span>

               <span *ngIf="!route.officeDirection">
                 Office
               </span>
              </th>

              <th scope="col">
                To:
                <span *ngIf="!route.officeDirection">
                <span *ngFor="let routeStop of this.route.routeStops">
                  <span *ngIf="routeStop.passengerEnum.toString() == 'DRIVER'">
                    {{routeStop.address.district + ' ' + routeStop.address.street}}
                  </span>
                </span>
               </span>

                <span *ngIf="route.officeDirection">
                 Office
               </span>
              </th>

              <th scope="col">{{route.car.manufacturer}}</th>
              <th scope="col">{{route.car.seats - route.routeStops.length}} free seat(s)</th>
            </tr>

            <tr *ngFor="let routeStop of this.route.routeStops">
              <ng-container *ngIf="!routeStop.approved">
                <td> {{routeStop.address.district}} </td>
                <td> {{routeStop.address.street}} </td>
                <td> Username: {{routeStop.userId.username}} </td>
                <td> Approved: {{routeStop.approved}} </td>
                <td>
                  <button type="button" class="btn btn-primary" (click)="approveRouteStop(routeStop.id)" >âœ”</button>
                  <button type="button" class="btn btn-danger" (click)="declineRouteStop(routeStop.id)" >X</button>
                  <button type="button" class="btn btn-info" (click)="viewOnMap(route.id, routeStop.id)" >?</button>
                </td>
              </ng-container>
            </tr>

          </table>
        </li>
      </ul>
      </span>

      <!-- Addresses -->
      <h3>Addresses:</h3>
      <ul class="list-group list-group-flush">
        <li *ngIf="this.addresses.length == 0" class="list-group-item">You still have no addresses.</li>
        <li *ngFor="let address of this.addresses" class="list-group-item">
          {{ address.district }},{{ address.city.name }},{{ address.street }}
          <span *ngIf="address.additionalInfo">
            , {{ address.additionalInfo }}
          </span>
        </li>
      </ul>

      <!-- Email -->
      <h3>Email:</h3>
      <ul class="list-group list-group-flush">
        <li class="list-group-item">
          {{this.user.email}}
        </li>
      </ul>

      <!-- Phone -->
      <h3>Phone:</h3>
      <ul class="list-group list-group-flush">
        <li class="list-group-item ">
          {{this.user.phone}}
        </li>
      </ul>


      <div *ngIf="user.driver">
        <!-- Cars -->
        <h3>Cars:</h3>
        <ul class="list-group list-group-flush">
          <li *ngFor="let car of this.cars" class="list-group-item">
            {{ car.color + ' ' + car.manufacturer + ' ' + car.model + ' ' + car.year }}
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
