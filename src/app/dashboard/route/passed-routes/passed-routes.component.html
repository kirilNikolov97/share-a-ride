<div class="container-fluid">
  <div class="row">

    <!-- Sidebar -->
    <div class="col-md-2">
      <app-sidebar></app-sidebar>
    </div>

    <!-- Routes -->
    <div class="col-md-10">
      <div *ngIf="tokenStorageService.getUser().driver">

        <!-- Last Routes - Driver -->
        <div class="row">
          <h3>Last Routes as a Driver:</h3>
        </div>
        <div class="row">
          <table class="table table-responsive-md">
            <tr>
              <th scope="col">Date</th>
              <th scope="col">From</th>
              <th scope="col">To</th>
              <th scope="col">Car</th>
              <th scope="col">Free Seats</th>
              <th scope="col">Options</th>
            </tr>

            <tr *ngFor="let route of this.userRoutesAsDriver">
              <td>{{route.dateRoute.toString().split('T').join(' ')}}</td>

              <!-- From -->
              <td>
                <span *ngIf="route.officeDirection">
                  <span *ngFor="let routeStop of this.route.routeStops">
                    <span *ngIf="routeStop.passengerEnum.toString() == 'DRIVER'">
                      {{routeStop.address.district + ' ' + routeStop.address.street}}
                    </span>
                  </span>
                </span>

                <span *ngIf="!route.officeDirection">
                  Office
                </span>
              </td>

              <!-- To -->
              <td>
                <span *ngIf="route.officeDirection">
                  Office
                </span>

                <span *ngIf="!route.officeDirection">
                  <span *ngFor="let routeStop of this.route.routeStops">
                    <span *ngIf="routeStop.passengerEnum.toString() == 'DRIVER'">
                      {{routeStop.address.district + ' ' + routeStop.address.street}}
                    </span>
                  </span>
                </span>
              </td>


              <td>{{route.car.manufacturer + ' ' + route.car.model}}</td>
              <td>
                {{route.car.seats - route.routeStops.length}}
              </td>
              <td>
                <button type="button" class="btn btn-primary" (click)="viewOnMap(route.id)" >View</button>
              </td>

            </tr>

          </table>
        </div>
      </div>


      <!-- Last Routes - Passenger -->
      <div class="row">
        <h3>Last Routes as a Passenger:</h3>
      </div>
      <div class="row">
        <table class="table table-responsive-md">
          <tr>
            <th scope="col">Date</th>
            <th scope="col">From</th>
            <th scope="col">To</th>
            <th scope="col">Car</th>
            <th scope="col">Driver Username</th>
          </tr>

          <tr *ngFor="let route of this.userRoutesAsPassenger">
            <th>{{route.dateRoute.toString().split('T').join(' ')}}</th>

            <!-- From -->
            <td>
                <span *ngIf="route.officeDirection">
                  <span *ngFor="let routeStop of this.route.routeStops">
                    <span *ngIf="routeStop.passengerEnum.toString() == 'DRIVER'">
                      {{routeStop.address.district + ' ' + routeStop.address.street}}
                    </span>
                  </span>
                </span>

              <span *ngIf="!route.officeDirection">
                  Office
                </span>
            </td>

            <!-- To -->
            <td>
                <span *ngIf="route.officeDirection">
                  Office
                </span>

              <span *ngIf="!route.officeDirection">
                  <span *ngFor="let routeStop of this.route.routeStops">
                    <span *ngIf="routeStop.passengerEnum.toString() == 'DRIVER'">
                      {{routeStop.address.district + ' ' + routeStop.address.street}}
                    </span>
                  </span>
                </span>
            </td>


            <td>{{route.car.manufacturer + ' ' + route.car.model}}</td>
            <td>
              <span *ngFor="let routeStop of this.route.routeStops">
                <span *ngIf="routeStop.passengerEnum.toString() == 'DRIVER'">
                  {{routeStop.userId.username}}
                </span>
              </span>
            </td>

          </tr>
        </table>
      </div>

    </div>

  </div>
</div>
